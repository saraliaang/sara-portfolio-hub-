<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cosmo Hub - Gesture Test</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div id="app">
      <!-- Main Content Stage -->
      <div id="content-stage">
        <header>
            <h1>Cosmo Hub</h1>
            <p>Use hand gestures to explore</p>
        </header>

        <div id="control-dock">
          <div class="mode-switch">
            <span class="mode-label">Interaction Mode</span>
            <div class="segmented" role="group" aria-label="Interaction Mode">
              <button class="mode-btn active" data-mode="standard" type="button">Standard</button>
              <button class="mode-btn" data-mode="camera" type="button">Camera</button>
            </div>
          </div>
          <button id="gesture-guide-btn" type="button">Gesture Guide</button>
        </div>
        
        <div id="galaxy-scroll-container">
            <div id="galaxy-list">
                <!-- Galaxy Cards will be injected or hardcoded here -->
                <div class="galaxy-card" data-id="nebula" role="button" tabindex="0" aria-label="Open Nebula Prime details">
                    <div class="card-content">
                        <h2>Nebula Prime</h2>
                        <p>A region of interstellar dust.</p>
                    </div>
                </div>
                <div class="galaxy-card" data-id="andromeda" role="button" tabindex="0" aria-label="Open Andromeda details">
                     <div class="card-content">
                        <h2>Andromeda</h2>
                        <p>Our nearest major neighbor.</p>
                    </div>
                </div>
                <div class="galaxy-card" data-id="triangulum" role="button" tabindex="0" aria-label="Open Triangulum details">
                     <div class="card-content">
                        <h2>Triangulum</h2>
                        <p>The third-largest member.</p>
                    </div>
                </div>
                <div class="galaxy-card" data-id="sombrero" role="button" tabindex="0" aria-label="Open Sombrero details">
                     <div class="card-content">
                        <h2>Sombrero</h2>
                        <p>Unbarred spiral galaxy.</p>
                    </div>
                </div>
                 <div class="galaxy-card" data-id="whirlpool" role="button" tabindex="0" aria-label="Open Whirlpool details">
                     <div class="card-content">
                        <h2>Whirlpool</h2>
                        <p>Interacting grand-design.</p>
                    </div>
                </div>
            </div>
        </div>
      </div>

      <!-- Overlays -->
        <div id="gesture_overlay">
           <!-- Cursor lives here -->
           <div id="cursor"></div>
           <!-- Status Pill -->
            <div id="status_pill">Scanning...</div>
            
            <!-- Detail Modal (Initially Hidden) -->
            <div id="detail-modal" class="hidden">
                <div class="modal-content">
                    <h2 id="modal-title">Galaxy Detail</h2>
                    <p id="modal-desc">Description goes here.</p>
                    <div class="modal-hints">
                        <span>ðŸ‘‹ Push to Dismiss</span>
                    </div>
                </div>
            </div>
            
            <!-- Memory Modal (Summon) -->
            <div id="memory-modal" class="hidden">
                 <div class="modal-content memory">
                    <h2>ðŸŒŒ Deep Memory</h2>
                    <p>You summoned a hidden memory!</p>
                    <div class="modal-hints">
                        <span>ðŸ‘‹ Push to Dismiss</span>
                    </div>
                </div>
            </div>
      </div>

      <!-- Gesture Guide Modal -->
      <div id="guide-modal" class="hidden" aria-hidden="true">
        <div class="guide-card" role="dialog" aria-modal="true" aria-labelledby="guide-title">
          <button id="guide-close" type="button" aria-label="Close gesture guide">Ã—</button>
          <div class="guide-hero">
            <svg viewBox="0 0 220 140" aria-hidden="true">
              <defs>
                <linearGradient id="guideGlow" x1="0" y1="0" x2="1" y2="1">
                  <stop offset="0" stop-color="#00e5ff" stop-opacity="0.9" />
                  <stop offset="1" stop-color="#7d2ae8" stop-opacity="0.7" />
                </linearGradient>
              </defs>
              <rect x="10" y="10" width="200" height="120" rx="18" fill="none" stroke="url(#guideGlow)" stroke-width="2" />
              <circle cx="70" cy="70" r="22" fill="none" stroke="url(#guideGlow)" stroke-width="2" />
              <circle cx="150" cy="70" r="22" fill="none" stroke="url(#guideGlow)" stroke-width="2" />
              <path d="M92 70 L128 70" stroke="url(#guideGlow)" stroke-width="3" stroke-linecap="round" />
              <path d="M70 48 L70 30" stroke="url(#guideGlow)" stroke-width="3" stroke-linecap="round" />
              <path d="M150 48 L150 30" stroke="url(#guideGlow)" stroke-width="3" stroke-linecap="round" />
            </svg>
            <p class="guide-caption">Pinch to confirm. Slide to scroll.</p>
          </div>
          <h2 id="guide-title">Gesture Guide</h2>
          <ul class="guide-list">
            <li>
              <div class="gesture-visual" aria-hidden="true">
                <svg viewBox="0 0 64 64">
                  <path d="M18 34c6-6 22-6 28 0" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                  <path d="M16 22h8M40 22h8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                  <path d="M12 42c8 8 32 8 40 0" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                </svg>
              </div>
              <div class="gesture-text"><span>Scroll</span>Move your hand left or right.</div>
            </li>
            <li>
              <div class="gesture-visual" aria-hidden="true">
                <svg viewBox="0 0 64 64">
                  <circle cx="24" cy="28" r="8" fill="none" stroke="currentColor" stroke-width="2" />
                  <circle cx="40" cy="36" r="8" fill="none" stroke="currentColor" stroke-width="2" />
                  <path d="M28 32L36 32" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                </svg>
              </div>
              <div class="gesture-text"><span>Confirm</span>Pinch to select a highlighted card.</div>
            </li>
            <li>
              <div class="gesture-visual" aria-hidden="true">
                <svg viewBox="0 0 64 64">
                  <path d="M20 44l12-20 12 20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                  <path d="M32 16v12" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                </svg>
              </div>
              <div class="gesture-text"><span>Dismiss</span>Push forward to close a modal.</div>
            </li>
            <li>
              <div class="gesture-visual" aria-hidden="true">
                <svg viewBox="0 0 64 64">
                  <path d="M22 44V24M30 44V20M38 44V22M46 44V26" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                  <path d="M18 44h32" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                </svg>
              </div>
              <div class="gesture-text"><span>Summon</span>Hold an open palm to reveal memory.</div>
            </li>
          </ul>
        </div>
      </div>

      <!-- Minimized Debug View (Picture-in-Picture) -->
      <div id="camera-pip">
        <video id="webcam" autoplay playsinline></video>
        <canvas id="output_canvas"></canvas>
        <div id="stats_overlay">Initializing...</div>
        <button id="camera-toggle" class="icon-btn" title="Toggle Camera">ðŸ“·</button>
      </div>
      
    </div>
    <script type="module" src="/src/main.js"></script>
  </body>
</html>
